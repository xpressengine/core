/**
 * @file   common/js/xe.min.js
 * @author NHN (developers@xpressengine.com)
 * @brief  XE Common JavaScript
 **/
(function(a){function b(){return function(){var e=this;a.isArray(this._plugins)&&(this._plugins=[]);this._messages?this._messages={}:this._binded_fn={};a.each(this,function(h,c){if(!a.isFunction(c)||!/^API_([A-Z0-9_]+)$/.test(h))return!0;var b=RegExp.$1,d=function(a,c){return e[h](a,c)};e._messages?e._messages[b]=[d]:e._binded_fn[b]=d});a.isFunction(this.init)&&this.init.apply(this,arguments)}}var d,c,g=[];d={_plugins:[],_messages:{},getPlugin:function(e){e=e.toLowerCase();return a.isArray(this._plugins[e])?
this._plugins[e]:[]},registerPlugin:function(e){var h=this,c=e.getName().toLowerCase();if(0<=a.inArray(e,this._plugins))return!1;this._plugins.push(e);a.isArray(this._plugins[c])||(this._plugins[c]=[]);this._plugins[c].push(e);a.each(e._binded_fn,function(a,e){h.registerHandler(a,e)});e.oApp=this;a.isFunction(e.activate)&&e.activate();return!0},registerHandler:function(e,h){var c=this._messages;e=e.toUpperCase();a.isArray(c[e])||(c[e]=[]);c[e].push(h)},cast:function(a,h){return this._cast(this,a,
h||[])},broadcast:function(a,h,c){this.parent&&this.parent._broadcast&&this.parent._broadcast(a,h,c)},_cast:function(e,h,c){var b,d=this._messages;h=h.toUpperCase();if(!d["BEFORE_"+h]&&!this["API_BEFORE_"+h]||this._cast(e,"BEFORE_"+h,c)){var g=[];if(a.isArray(d[h]))for(b=0;b<d[h].length;b++)g.push(d[h][b](e,c));2>g.length&&(g=g[0]);(d["AFTER_"+h]||this["API_AFTER_"+h])&&this._cast(e,"AFTER_"+h,c);return/^(?:AFTER|BEFORE)_/.test(h)?a.isArray(g)?0>a.inArray(!1,g):"undefined"==typeof g?!0:!!g:g}}};c=
{oApp:null,cast:function(a,c){if(this.oApp&&this.oApp._cast)return this.oApp._cast(this,a,c||[])},broadcast:function(a,c){this.oApp&&this.oApp.broadcast&&this.oApp.broadcast(this,mag,c||[])}};window.xe=a.extend(d,{getName:function(){return"Core"},createApp:function(e,c){var g=b();a.extend(g.prototype,d,c);g.prototype.getName=function(){return e};return g},createPlugin:function(e,h){var d=b();a.extend(d.prototype,c,h);d.prototype.getName=function(){return e};return d},getApps:function(){return a.makeArray(g)},
getApp:function(a){a=(a||"").toLowerCase();return"undefined"!=typeof g[a]?g[a]:null},registerApp:function(e){var c=e.getName().toLowerCase();g.push(e);a.isArray(g[c])||(g[c]=[]);g[c].push(e);e.parent=this;a.isFunction(e.activate)&&e.activate()},unregisterApp:function(e){var c=e.getName().toLowerCase(),b=a.inArray(e,g);0<=b&&(g=g.splice(b,1));a.isArray(g[c])&&(b=a.inArray(e,g[c]),0<=b&&(g[c]=g[c].splice(b,1)));a.isFunction(e.deactivate)&&e.deactivate()},broadcast:function(a,c){this._broadcast(this,
a,c)},_broadcast:function(a,c,b){for(var d=0;d<g.length;d++)g[d]._cast(a,c,b);this._cast(a,c,b)}});window.xe.lang={};a(function(){xe.broadcast("ONREADY")});a(window).load(function(){xe.broadcast("ONLOAD")})})(jQuery);jQuery&&jQuery.noConflict();
(function(a){var b=navigator.userAgent.toLowerCase();a.os={Linux:/linux/.test(b),Unix:/x11/.test(b),Mac:/mac/.test(b),Windows:/win/.test(b)};a.os.name=a.os.Windows?"Windows":a.os.Linux?"Linux":a.os.Unix?"Unix":a.os.Mac?"Mac":"";window.XE={loaded_popup_menus:[],addedDocument:[],checkboxToggleAll:function(b){is_def(b)||(b="cart");var c={wrap:null,checked:"toggle",doClick:!1};switch(arguments.length){case 1:"string"==typeof arguments[0]?b=arguments[0]:(a.extend(c,arguments[0]||{}),b="cart");break;case 2:b=
arguments[0],a.extend(c,arguments[1]||{})}!0==c.doClick&&(c.checked=null);"string"==typeof c.wrap&&(c.wrap="#"+c.wrap);var g=c.wrap?a(c.wrap).find("input[name="+b+"]:checkbox"):a("input[name="+b+"]:checkbox");"toggle"==c.checked?g.each(function(){a(this).attr("checked",a(this).attr("checked")?!1:!0)}):!0==c.doClick?g.click():g.attr("checked",c.checked)},displayPopupMenu:function(b,c,g){c=g.menu_id;var e=b.menus;b="";if(this.loaded_popup_menus[c])b=this.loaded_popup_menus[c];else{if(e){e=e.item;if("undefined"==
typeof e.length||1>e.length)e=Array(e);if(e.length)for(var h=0;h<e.length;h++){var n=e[h].url,l=e[h].str,m=e[h].target,k="";switch(m){case "popup":k=" onclick=\"popopen(this.href,'"+m+"'); return false;\"";break;case "javascript":k=' onclick="'+n+'; return false; "',n="#"}b+='<li ><a href="'+n+'"'+k+">"+l+"</a></li> "}}this.loaded_popup_menus[c]=b}b&&(c=a("#popup_menu_area").html("<ul>"+b+"</ul>"),b=g.page_y,g=g.page_x,c.outerHeight()+b>a(window).height()+a(window).scrollTop()&&(b=a(window).height()-
c.outerHeight()+a(window).scrollTop()),c.outerWidth()+g>a(window).width()+a(window).scrollLeft()&&(g=a(window).width()-c.outerWidth()+a(window).scrollLeft()),c.css({top:b,left:g}).show().focus())}}})(jQuery);
jQuery(function(a){a.browser.msie&&a("select").each(function(a,b){for(var e=!1,h=[],d=0;d<b.options.length;d++)b.options[d].disabled?(b.options[d].style.color="#CCCCCC",e=!0):h[a]=-1<h[a]?h[a]:d;if(e&&(b.oldonchange=b.onchange,b.onchange=function(){this.options[this.selectedIndex].disabled?this.selectedIndex=h[a]:this.oldonchange&&this.oldonchange()},0<=b.selectedIndex&&b.options[b.selectedIndex].disabled))b.onchange()});var b=a(".xe_content .fold_button");if(b.size()){var d=a("div.fold_container",
b);a("button.more",b).click(function(){a(this).hide().next("button").show().parent().next(d).show()});a("button.less",b).click(function(){a(this).hide().prev("button").show().parent().next(d).hide()})}jQuery('input[type="submit"],button[type="submit"]').click(function(a){var b=jQuery(a.currentTarget);setTimeout(function(){return function(){b.attr("disabled","disabled")}}(),0);setTimeout(function(){return function(){b.removeAttr("disabled")}}(),3E3)})});
(function(){function a(a,b){return a.replace(/#.*$/,"")===b.replace(/#.*$/,"")}var b=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)};String.prototype.getQuery=function(b){var c=a(this,window.location.href)?current_url:this,g=c.indexOf("?");if(-1==g)return null;var e={};c.substr(g+1,this.length).replace(/([^=]+)=([^&]*)(&|$)/g,function(a,b,c){e[b]=c});b=e[b];"undefined"==typeof b&&(b="");return b};String.prototype.setQuery=function(d,c){var g=a(this,window.location.href)?
current_url:this,e=g.indexOf("?"),h=g.replace(/#$/,""),n,l;"undefined"==typeof c&&(c="");if(-1!=e){var m=h.substr(e+1,g.length),k={},u=[],h=g.substr(0,e);m.replace(/([^=]+)=([^&]*)(&|$)/g,function(a,b,e){k[b]=e});k[d]=c;for(var t in k)k.hasOwnProperty(t)&&(l=String(k[t]).trim())&&u.push(t+"="+decodeURI(l));m=u.join("&");h+=m?"?"+m:""}else String(c).trim()&&(h=h+"?"+d+"="+c);e=/^https:\/\/([^:\/]+)(:\d+|)/i;e.test(h)&&(g="http://"+RegExp.$1,window.http_port&&80!=http_port&&(g+=":"+http_port),h=h.replace(e,
g));g=!!window.enforce_ssl;if(!g&&b(window.ssl_actions)&&(n=h.getQuery("act")))for(e=0,l=ssl_actions.length;e<l;e++)if(ssl_actions[e]===n){g=!0;break}e=/http:\/\/([^:\/]+)(:\d+|)/i;g&&e.test(h)&&(g="https://"+RegExp.$1,window.https_port&&443!=https_port&&(g+=":"+https_port),h=h.replace(e,g));h=h.replace(/\/(index\.php)?\?/,"/index.php?");return encodeURI(h)};String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")}})();
function xSleep(a){a/=1E3;for(var b=new Date,d=new Date;d.getTime()-b.getTime()<a;)d=new Date}function isDef(){for(var a=0;a<arguments.length;++a)if("undefined"==typeof arguments[a])return!1;return!0}var winopen_list=[];
function winopen(a,b,d){"undefined"!=typeof xeVid&&-1<a.indexOf(request_uri)&&!a.getQuery("vid")&&(a=a.setQuery("vid",xeVid));try{"_blank"!=b&&winopen_list[b]&&(winopen_list[b].close(),winopen_list[b]=null)}catch(c){}"undefined"==typeof b&&(b="_blank");"undefined"==typeof d&&(d="");a=window.open(a,b,d);a.focus();"_blank"!=b&&(winopen_list[b]=a)}
function popopen(a,b){"undefined"==typeof b&&(b="_blank");"undefined"!=typeof xeVid&&-1<a.indexOf(request_uri)&&!a.getQuery("vid")&&(a=a.setQuery("vid",xeVid));winopen(a,b,"width=800,height=600,scrollbars=yes,resizable=yes,toolbars=no")}function sendMailTo(a){location.href="mailto:"+a}function move_url(a,b){if(!a)return!1;"undefined"==typeof b&&(b="N");b="N"==b?!1:!0;/^\./.test(a)&&(a=request_uri+a);b?winopen(a):location.href=a;return!1}
function displayMultimedia(a,b,d,c){(a=_displayMultimedia(a,b,d,c))&&document.writeln(a)}
function _displayMultimedia(a,b,d,c){0==a.indexOf("files")&&(a=request_uri+a);c=jQuery.extend({wmode:"transparent",allowScriptAccess:"sameDomain",quality:"high",flashvars:"",autostart:!1},c||{});var g=c.autostart&&"false"!=c.autostart?"true":"false";delete c.autostart;var e="",e="";if(/\.(gif|jpg|jpeg|bmp|png)$/i.test(a))e='<img src="'+a+'" width="'+b+'" height="'+d+'" />';else if(/\.flv$/i.test(a)||/\.mov$/i.test(a)||/\.moov$/i.test(a)||/\.m4v$/i.test(a))e='<embed src="'+request_uri+'common/img/flvplayer.swf" allowfullscreen="true" autostart="'+
g+'" width="'+b+'" height="'+d+'" flashvars="&file='+a+"&width="+b+"&height="+d+"&autostart="+g+'" wmode="'+c.wmode+'" />';else if(/\.swf/i.test(a)){var e="undefined"!=typeof enforce_ssl&&enforce_ssl?"https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0":"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0",e='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+e+'" width="'+b+'" height="'+d+'" flashvars="'+c.flashvars+
'">',e=e+('<param name="movie" value="'+a+'" />'),h;for(h in c)"undefined"!=c[h]&&""!=c[h]&&(e+='<param name="'+h+'" value="'+c[h]+'" />');e+='<embed src="'+a+'" autostart="'+g+'"  width="'+b+'" height="'+d+'" flashvars="'+c.flashvars+'" wmode="'+c.wmode+'"></embed></object>'}else{if(jQuery.browser.mozilla||jQuery.browser.opera)g=c.autostart&&"false"!=c.autostart?"1":"0";e='<embed src="'+a+'" autostart="'+g+'" width="'+b+'" height="'+d+'"';"transparent"==c.wmode&&(e+=' windowlessvideo="1"');e+="></embed>"}return e}
function zbxe_folder_open(a){jQuery("#folder_open_"+a).hide();jQuery("#folder_close_"+a).show();jQuery("#folder_"+a).show()}function zbxe_folder_close(a){jQuery("#folder_open_"+a).show();jQuery("#folder_close_"+a).hide();jQuery("#folder_"+a).hide()}
function setFixedPopupSize(){var a=jQuery,b=a(window),a=a("body>.popup"),d,c,g,e;e=a.css({overflow:"scroll"}).offset();d=a.width(10).height(1E4).get(0).scrollWidth+2*e.left;c=a.height(10).width(1E4).get(0).scrollHeight+2*e.top;800>d&&(d=800+2*e.left);g=b.width();b=b.height();d!=g&&window.resizeBy(d-g,0);c!=b&&window.resizeBy(0,c-b);a.width(d-2*e.left).css({overflow:"",height:""})}
function doCallModuleAction(a,b,d){exec_xml(a,b,{target_srl:d,cur_mid:current_mid,mid:current_mid},completeCallModuleAction)}function completeCallModuleAction(a,b){"success"!=a.message&&alert(a.message);location.reload()}function completeMessage(a){alert(a.message);location.reload()}function doChangeLangType(a){"string"==typeof a?setLangType(a):setLangType(a.options[a.selectedIndex].value);location.href=location.href.setQuery("l","")}
function setLangType(a){var b=new Date;b.setTime(b.getTime()+6048E8);setCookie("lang_type",a,b,"/")}
function doDocumentPreview(a){for(;"FORM"!=a.nodeName;)a=a.parentNode;if("FORM"==a.nodeName){a=a.getAttribute("editor_sequence");a=editorGetContent(a);window.open("","previewDocument","toolbars=no,width=700px;height=800px,scrollbars=yes,resizable=yes");var b=jQuery("#previewDocument");b.length?b=b[0]:(jQuery('<form id="previewDocument" target="previewDocument" method="post" action="'+request_uri+'"><input type="hidden" name="module" value="document" /><input type="hidden" name="act" value="dispDocumentPreview" /><input type="hidden" name="content" /></form>').appendTo(document.body),b=
jQuery("#previewDocument")[0]);b&&(b.content.value=a,b.submit())}}
function doDocumentSave(a){var b=a.form.getAttribute("editor_sequence"),d=editorRelKeys[b].content.value;if("undefined"!=typeof b&&b&&"undefined"!=typeof editorRelKeys&&"function"==typeof editorGetContent){var c=editorGetContent(b);editorRelKeys[b].content.value=c}var g={},c=jQuery(a.form).serializeArray();jQuery.each(c,function(a,b){var c=jQuery.trim(b.value);if(!c)return!0;/\[\]$/.test(b.name)&&(b.name=b.name.replace(/\[\]$/,""));g[b.name]=g[b.name]?g[b.name]+("|@|"+c):b.value});exec_xml("document",
"procDocumentTempSave",g,completeDocumentSave,["error","message","document_srl"],g,a.form);editorRelKeys[b].content.value=d;return!1}function completeDocumentSave(a){jQuery("input[name=document_srl]").eq(0).val(a.document_srl);alert(a.message)}var objForSavedDoc=null;function doDocumentLoad(a){objForSavedDoc=a.form;popopen(request_uri.setQuery("module","document").setQuery("act","dispTempSavedList"))}
function doDocumentSelect(a){opener&&opener.objForSavedDoc&&(opener.location.href=opener.current_url.setQuery("document_srl",a).setQuery("act","dispBoardWrite"));window.close()}function viewSkinInfo(a,b){popopen("./?module=module&act=dispModuleSkinInfo&selected_module="+a+"&skin="+b,"SkinInfo")}var addedDocument=[];function doAddDocumentCart(a){addedDocument[addedDocument.length]=a.value;setTimeout(function(){callAddDocumentCart(addedDocument.length)},100)}
function callAddDocumentCart(a){1>addedDocument.length||a!=addedDocument.length||(a=[],a.srls=addedDocument.join(","),exec_xml("document","procDocumentAddCart",a,null),addedDocument=[])}
function transRGB2Hex(a){if(!a)return a;if(-1<a.indexOf("#"))return a.replace(/^#/,"");if(0>a.toLowerCase().indexOf("rgb"))return a;a=a.replace(/^rgb\(/i,"").replace(/\)$/,"");value_list=a.split(",");a="";for(var b=0;b<value_list.length;b++){var d=parseInt(value_list[b],10).toString(16);1==d.length&&(d="0"+d);a+=d}return a}function toggleSecuritySignIn(){var a=location.href;/https:\/\//i.test(a)?location.href=a.replace(/^https/i,"http"):location.href=a.replace(/^http/i,"https")}
function reloadDocument(){location.reload()}
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b="",d,c,g,e,h,n,l=0;for(a=Base64._utf8_encode(a);l<a.length;)d=a.charCodeAt(l++),c=a.charCodeAt(l++),g=a.charCodeAt(l++),e=d>>2,d=(d&3)<<4|c>>4,h=(c&15)<<2|g>>6,n=g&63,isNaN(c)?h=n=64:isNaN(g)&&(n=64),b=b+this._keyStr.charAt(e)+this._keyStr.charAt(d)+this._keyStr.charAt(h)+this._keyStr.charAt(n);return b},decode:function(a){var b="",d,c,g,e,h,n=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");n<
a.length;)d=this._keyStr.indexOf(a.charAt(n++)),c=this._keyStr.indexOf(a.charAt(n++)),e=this._keyStr.indexOf(a.charAt(n++)),h=this._keyStr.indexOf(a.charAt(n++)),d=d<<2|c>>4,c=(c&15)<<4|e>>2,g=(e&3)<<6|h,b+=String.fromCharCode(d),64!=e&&(b+=String.fromCharCode(c)),64!=h&&(b+=String.fromCharCode(g));return b=Base64._utf8_decode(b)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",d=0;d<a.length;d++){var c=a.charCodeAt(d);128>c?b+=String.fromCharCode(c):(127<c&&2048>c?b+=String.fromCharCode(c>>
6|192):(b+=String.fromCharCode(c>>12|224),b+=String.fromCharCode(c>>6&63|128)),b+=String.fromCharCode(c&63|128))}return b},_utf8_decode:function(a){for(var b="",d=0,c=c1=c2=0;d<a.length;)c=a.charCodeAt(d),128>c?(b+=String.fromCharCode(c),d++):191<c&&224>c?(c2=a.charCodeAt(d+1),b+=String.fromCharCode((c&31)<<6|c2&63),d+=2):(c2=a.charCodeAt(d+1),c3=a.charCodeAt(d+2),b+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63),d+=3);return b}};
if("undefined"==typeof resizeImageContents)var resizeImageContents=function(){};if("undefined"==typeof activateOptionDisabled)var activateOptionDisabled=function(){};objectExtend=jQuery.extend;function toggleDisplay(a){jQuery("#"+a).toggle()}function svc_folder_open(a){jQuery("#_folder_open_"+a).hide();jQuery("#_folder_close_"+a).show();jQuery("#_folder_"+a).show()}function svc_folder_close(a){jQuery("#_folder_open_"+a).show();jQuery("#_folder_close_"+a).hide();jQuery("#_folder_"+a).hide()}
function open_calendar(a,b,d){"undefined"==typeof b&&(b="");var c="./common/tpl/calendar.php?";a&&(c+="fo_id="+a);b&&(c+="&day_str="+b);d&&(c+="&callback_func="+d);popopen(c,"Calendar")}var loaded_popup_menus=XE.loaded_popup_menus;function createPopupMenu(){}function chkPopupMenu(){}function displayPopupMenu(a,b,d){XE.displayPopupMenu(a,b,d)}function GetObjLeft(a){return jQuery(a).offset().left}function GetObjTop(a){return jQuery(a).offset().top}
function replaceOuterHTML(a,b){jQuery(a).replaceWith(b)}function getOuterHTML(a){return jQuery(a).html().trim()}function setCookie(a,b,d,c){a=a+"="+escape(b)+(d?"; expires="+d.toGMTString():"")+"; path="+(c?c:"/");document.cookie=a}function getCookie(a){if(a=document.cookie.match(RegExp(a+"=(.*?)(?:;|$)")))return unescape(a[1])}function is_def(a){return"undefined"!=typeof a}function ucfirst(a){return a.charAt(0).toUpperCase()+a.slice(1)}function get_by_id(a){return document.getElementById(a)}
jQuery(function(a){a(document).click(function(b){var d=a("#popup_menu_area");d.length||(d=a('<div id="popup_menu_area" tabindex="0" style="display:none;z-index:9999" />').appendTo(document.body));d.hide();d=a(b.target).filter("a,div,span");d.length||(d=a(b.target).closest("a,div,span"));if(d.length){var d=d.attr("class"),c;d&&(c=d.match(/(?:^| )((document|comment|member)_([1-9]\d*))(?: |$)/));if(c){d="get"+ucfirst(c[2])+"Menu";c={mid:current_mid,cur_mid:current_mid,menu_id:c[1],target_srl:c[3],cur_act:current_url.getQuery("act"),
page_x:b.pageX,page_y:b.pageY};var g=["error","message","menus"];b.preventDefault();b.stopPropagation();is_def(window.xeVid)&&(c.vid=xeVid);if(is_def(XE.loaded_popup_menus[c.menu_id]))return XE.displayPopupMenu(c,g,c);show_waiting_message=!1;exec_xml("member",d,c,XE.displayPopupMenu,g,c);show_waiting_message=!0}}});a("a._xe_popup").click(function(){var b=a(this),d=b.attr("name"),b=b.attr("href");d||(d="_xe_popup_"+Math.floor(1E3*Math.random()));(d=window.open(b,d,"left=10,top=10,width=10,height=10,resizable=no,scrollbars=no,toolbars=no"))&&
d.focus();return!1});a.datepicker&&a.datepicker.setDefaults({dateFormat:"yy-mm-dd"})});var show_waiting_message=!0;
function xml2json(a,b,d){var c={toObj:function(a){var b={};if(1==a.nodeType){if(d&&a.attributes.length)for(var g=0;g<a.attributes.length;g++)b["@"+a.attributes[g].nodeName]=(a.attributes[g].nodeValue||"").toString();if(a.firstChild){for(var l=g=0,m=!1,k=a.firstChild;k;k=k.nextSibling)1==k.nodeType?m=!0:3==k.nodeType&&k.nodeValue.match(/[^ \f\n\r\t\v]/)?g++:4==k.nodeType&&l++;if(m)if(2>g&&2>l)for(c.removeWhite(a),k=a.firstChild;k;k=k.nextSibling)3==k.nodeType?b=c.escape(k.nodeValue):4==k.nodeType?
b=c.escape(k.nodeValue):b[k.nodeName]?b[k.nodeName]instanceof Array?b[k.nodeName][b[k.nodeName].length]=c.toObj(k):b[k.nodeName]=[b[k.nodeName],c.toObj(k)]:b[k.nodeName]=c.toObj(k);else a.attributes.length?b["#text"]=c.escape(c.innerXml(a)):b=c.escape(c.innerXml(a));else if(g)a.attributes.length?b["#text"]=c.escape(c.innerXml(a)):b=c.escape(c.innerXml(a));else if(l)if(1<l)b=c.escape(c.innerXml(a));else for(k=a.firstChild;k;k=k.nextSibling)b=c.escape(k.nodeValue)}a.attributes.length||a.firstChild||
(b=null)}else 9==a.nodeType?b=c.toObj(a.documentElement):alert("unhandled node type: "+a.nodeType);return b},toJson:function(a,b,g){var d=b?'"'+b+'"':"";if(a instanceof Array){for(var m=0,k=a.length;m<k;m++)a[m]=c.toJson(a[m],"",g+"\t");d+=(b?":[":"[")+(1<a.length?"\n"+g+"\t"+a.join(",\n"+g+"\t")+"\n"+g:a.join(""))+"]"}else if(null==a)d+=(b&&":")+"null";else if("object"==typeof a){m=[];for(k in a)m[m.length]=c.toJson(a[k],k,g+"\t");d+=(b?":{":"{")+(1<m.length?"\n"+g+"\t"+m.join(",\n"+g+"\t")+"\n"+
g:m.join(""))+"}"}else d="string"==typeof a?d+((b&&":")+'"'+a.toString()+'"'):d+((b&&":")+a.toString());return d},innerXml:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else{var c=function(a){var b="";if(1==a.nodeType){for(var b=b+("<"+a.nodeName),e=0;e<a.attributes.length;e++)b+=" "+a.attributes[e].nodeName+'="'+(a.attributes[e].nodeValue||"").toString()+'"';if(a.firstChild){b+=">";for(e=a.firstChild;e;e=e.nextSibling)b+=c(e);b+="</"+a.nodeName+">"}else b+="/>"}else 3==a.nodeType?b+=a.nodeValue:
4==a.nodeType&&(b+="<![CDATA["+a.nodeValue+"]]\x3e");return b};for(a=a.firstChild;a;a=a.nextSibling)b+=c(a)}return b},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();for(var b=a.firstChild;b;)if(3==b.nodeType)if(b.nodeValue.match(/[^ \f\n\r\t\v]/))b=b.nextSibling;else{var g=b.nextSibling;a.removeChild(b);b=g}else 1==b.nodeType&&c.removeWhite(b),b=b.nextSibling;return a}};9==a.nodeType&&
(a=a.documentElement);var g=c.toObj(c.removeWhite(a));"object"==typeof JSON&&jQuery.isFunction(JSON.stringify);a=c.toJson(g,a.nodeName,"");return"{"+(b?a.replace(/\t/g,b):a.replace(/\t|\n/g,""))+"}"}
(function(a){function b(b,c){a("#xeTmpIframe").length||a('<iframe name="%id%" id="%id%" style="position:absolute;left:-1px;top:1px;width:1px;height:1px"></iframe>'.replace(/%id%/g,"xeTmpIframe")).appendTo(document.body);a("#xeVirtualForm").remove();var d=a('<form id="%id%"></form>'.replace(/%id%/g,"xeVirtualForm")).attr({id:"xeVirtualForm",method:"post",action:b,target:"xeTmpIframe"});c.xeVirtualRequestMethod="xml";c.xeRequestURI=location.href.replace(/#(.*)$/i,"");c.xeVirtualRequestUrl=request_uri;
a.each(c,function(b,c){a('<input type="hidden">').attr("name",b).attr("value",c).appendTo(d)});d.appendTo(document.body).submit()}function d(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function c(){return""}a.exec_xml=window.exec_xml=function(c,e,h,n,l,m,k){function u(b,d,h){b=a(b).find("response")[0];d="";var u=[],t={};h="";w.css("display","none").trigger("cancel_confirm");if(!b)return alert(x.responseText),null;h=xml2json(b,!1,!1);h="object"==typeof JSON&&a.isFunction(JSON.parse)?
JSON.parse(h):eval("("+h+")");h=h.response;if("undefined"==typeof h){u.error=-1;u.message="Unexpected error occured.";try{"undefined"!=typeof(d=b.childNodes[0].firstChild.data)&&(u.message+="\r\n"+d)}catch(p){}return u}a.each(l,function(a,b){t[b]=!0});t.redirect_url=!0;t.act=!0;a.each(h,function(a,b){t[a]&&(u[a]=b)});if(0!=u.error){if(a.isFunction(a.exec_xml.onerror))return a.exec_xml.onerror(c,e,u,n,l,m,k);alert((u.message||"An unknown error occured while loading ["+c+"."+e+"]").replace(/\\n/g,"\n"));
return null}if(u.redirect_url)return location.href=u.redirect_url.replace(/&amp;/g,"&"),null;a.isFunction(n)&&n(u,l,m,k)}var t=request_uri+"index.php";h||(h={});a.isArray(h)&&(h=d(h));h.module=c;h.act=e;"undefined"!=typeof xeVid&&(h.vid=xeVid);"undefined"==typeof l||1>l.length?l=["error","message"]:l.push("error","message");if(a.isArray(ssl_actions)&&h.act&&0<=a.inArray(h.act,ssl_actions)){var p=default_url||request_uri,t=window.https_port||443,p=a("<a>").attr("href",p)[0],y="https://"+p.hostname.replace(/:\d+$/,
"");443!=t&&(y+=":"+t);"/"!=p.pathname[0]&&(y+="/");y+=p.pathname;t=y.replace(/\/$/,"")+"/index.php"}p=a("<a>").attr("href",location.href)[0];y=a("<a>").attr("href",t)[0];if(p.protocol!=y.protocol||p.port!=y.port)return b(t,h);var z=[],q=0;z[q++]='<?xml version="1.0" encoding="utf-8" ?>';z[q++]="<methodCall>";z[q++]="<params>";a.each(h,function(a,b){z[q++]="<"+a+"><![CDATA["+b+"]]\x3e</"+a+">"});z[q++]="</params>";z[q++]="</methodCall>";var x=null;x&&0!=x.readyState&&x.abort();try{a.ajax({url:t,type:"POST",
dataType:"xml",data:z.join("\n"),contentType:"text/plain",beforeSend:function(a){x=a},success:u,error:function(a,b){w.css("display","none");var c="";if("parsererror"==b){if(""==a.responseText)return;c="The result is not valid XML :\n-------------------------------------\n"+a.responseText.replace(/<[^>]+>/g,"")}else c=b;try{console.log(c)}catch(e){}}})}catch(C){alert(C);return}var w=a(".wfsr");show_waiting_message&&w.length&&((h=a(".wfsr").data("timeout_id"))&&clearTimeout(h),a(".wfsr").css("opacity",
0),a(".wfsr").data("timeout_id",setTimeout(function(){a(".wfsr").css("opacity","")},1E3)),w.html(waiting_message).show())};a.exec_json=function(b,c,d,n){"undefined"==typeof c&&(c={});b=b.split(".");if(2==b.length){var l=a(".wfsr").data("timeout_id");l&&clearTimeout(l);a(".wfsr").css("opacity",0);a(".wfsr").data("timeout_id",setTimeout(function(){a(".wfsr").css("opacity","")},1E3));show_waiting_message&&a(".wfsr").html(waiting_message).show();a.extend(c,{module:b[0],act:b[1]});"undefined"!=typeof xeVid&&
a.extend(c,{vid:xeVid});a.ajax({type:"POST",dataType:"json",url:request_uri,contentType:"application/json",data:a.param(c),success:function(b){a(".wfsr").hide().trigger("cancel_confirm");0!=b.error&&-1E3<b.error?(-1==b.error&&"msg_is_not_administrator"==b.message?alert("You are not logged in as an administrator"):alert(b.message),a.isFunction(n)&&n(b)):a.isFunction(d)&&d(b)}})}};a.fn.exec_html=function(b,c,d,n,l){"undefined"==typeof c&&(c={});a.inArray(d,["html","append","prepend"])||(d="html");var m=
a(this);b=b.split(".");if(2==b.length){var k=a(".wfsr").data("timeout_id");k&&clearTimeout(k);a(".wfsr").css("opacity",0);a(".wfsr").data("timeout_id",setTimeout(function(){a(".wfsr").css("opacity","")},1E3));show_waiting_message&&a(".wfsr").html(waiting_message).show();a.extend(c,{module:b[0],act:b[1]});a.ajax({type:"POST",dataType:"html",url:request_uri,data:a.param(c),success:function(b){a(".wfsr").hide().trigger("cancel_confirm");m[d](b);a.isFunction(n)&&n(l)}})}};a(function(a){a(".wfsr").ajaxStart(function(){a(window).bind("beforeunload",
c)}).bind("ajaxStop cancel_confirm",function(){a(window).unbind("beforeunload",c)})})})(jQuery);
(function(a){function b(a){var b=[];return a.is(":radio")?a.filter(":checked").val():a.is(":checkbox")?(a.filter(":checked").each(function(){b.push(this.value)}),b.join("|@|")):a.val()}function d(a){a+="";if(!a.length)return 0;a=encodeURI(a);var b=a.split("%").length-1;return a.length-2*b}var c=[],g=[],e={},h=[],n={},l=new (xe.createApp("Validator",{init:function(){var a=/^[\w-]+((?:\.|\+|\~)[\w-]+)*@[\w-]+(\.[\w-]+)+$/;this.cast("ADD_RULE",["email",a]);this.cast("ADD_RULE",["email_address",a]);a=
/^[a-z]+[\w-]*[a-z0-9_]+$/i;this.cast("ADD_RULE",["userid",a]);this.cast("ADD_RULE",["user_id",a]);a=/^(https?|ftp|mms):\/\/[0-9a-z-]+(\.[_0-9a-z-]+)+(:\d+)?/;this.cast("ADD_RULE",["url",a]);this.cast("ADD_RULE",["homepage",a]);this.cast("ADD_RULE",["korean",RegExp("^[\uac00-\ud7a3]*$")]);this.cast("ADD_RULE",["korean_number",RegExp("^[\uac00-\ud7a30-9]*$")]);this.cast("ADD_RULE",["alpha",/^[a-z]*$/i]);this.cast("ADD_RULE",["alpha_number",/^[a-z][a-z0-9_]*$/i]);this.cast("ADD_RULE",["number",/^[0-9]*$/])},
run:function(a){var b="";a._filter&&(b=a._filter.value);a=this.cast("VALIDATE",[a,b]);"undefined"==typeof a&&(a=!1);return a},API_ONREADY:function(){var b=this;a("form").each(function(){this.onsubmit&&(this["xe:onsubmit"]=this.onsubmit,this.onsubmit=null)}).submit(function(c){var d=this["xe:onsubmit"];(d=a.isFunction(d)?d.apply(this):b.run(this))||c.stopImmediatePropagation();return d})},API_VALIDATE:function(c,g){function t(a){return a.replace(/([\.\+\-\[\]\{\}\(\)\\])/g,"\\$1")}var p=!0,l=g[0],
m=l.elements,q,x,C,w,s,r,D,v,A,B;m.ruleset?q=l.elements.ruleset.value:m._filter&&(q=l.elements._filter.value);if(!q)return!0;a.isFunction(h[q])&&(C=h[q]);q=a.extend({},e[q.toLowerCase()]||{},n);w=[];r=0;for(v=l.elements.length;r<v;r++)p=m[r],(s=p.name)&&m[s]&&(m[s].length&&m[s][0]!==p||w.push(s));w=w.join("\n");x={};for(s in q)if(q.hasOwnProperty(s)&&(p=[],"^"==s.substr(0,1))){(p=w.match(RegExp("^"+t(s.substr(1))+".*$","gm")))||(p=[]);r=0;for(v=p.length;r<v;r++)x[p[r]]=q[s];q[s]=null;delete q[s]}q=
a.extend(q,x);for(s in q)if(q.hasOwnProperty(s)&&(f=q[s],(p=m[s])||(p=m[s+"[]"]),w=p?a.trim(b(a(p))):"",x=(f.modifier||"")+",",p&&!p.disabled)){if(f["if"])for(a.isArray(f["if"])||(f["if"]=[f["if"]]),r=0;r<f["if"].length;r++)v=f["if"][r],p=new Function("el","return !!("+v.test.replace(/\$(\w+)/g,"(jQuery('[name=$1]').is(':radio, :checkbox') ? jQuery('[name=$1]:checked').val() : jQuery('[name=$1]').val())")+")"),p(m)?f[v.attr]=v.value:delete f[v.attr];if(w){p=parseInt(f.minlength)||0;v=parseInt(f.maxlength)||
0;B=/b$/.test(f.minlength||"");A=/b$/.test(f.maxlength||"");r=w.length;if(B||A)D=d(w);if(p&&p>(B?D:r)||v&&v<(A?D:r))return this.cast("ALERT",[l,s,"outofrange",p,v])&&!1;if(f.equalto&&(v=(r=m[f.equalto])?a.trim(b(a(r))):"",r&&v!==w))return this.cast("ALERT",[l,s,"equalto"])&&!1;A=(f.rule||"").split(",");r=0;for(v=A.length;r<v;r++)if(B=A[r])if(p=this.cast("APPLY_RULE",[B,w]),-1<x.indexOf("not,")&&(p=!p),!p)return this.cast("ALERT",[l,s,"invalid_"+B])&&!1}else if(f["default"]&&(w=f["default"]),f.required)return this.cast("ALERT",
[l,s,"isnull"])&&!1}return a.isFunction(C)?C(l):!0},API_ADD_RULE:function(a,b){var c=b[0].toLowerCase();g[c]=b[1]},API_DEL_RULE:function(a,b){var c=b[0].toLowerCase();delete g[c]},API_GET_RULE:function(a,b){var c=b[0].toLowerCase();return g[c]?g[c]:null},API_ADD_FILTER:function(a,b){var c=b[0].toLowerCase();e[c]=b[1]},API_DEL_FILTER:function(a,b){var c=b[0].toLowerCase();delete e[c]},API_GET_FILTER:function(a,b){var c=b[0].toLowerCase();return e[c]?e[c]:null},API_ADD_EXTRA_FIELD:function(a,b){var c=
b[0].toLowerCase();n[c]=b[1]},API_GET_EXTRA_FIELD:function(a,b){var c=b[0].toLowerCase();return n[c]},API_DEL_EXTRA_FIELD:function(a,b){var c=b[0].toLowerCase();delete n[c]},API_APPLY_RULE:function(b,c){var d=c[0],e=c[1];return"undefined"==typeof g[d]?!0:a.isFunction(g[d])?g[d](e):g[d]instanceof RegExp?g[d].test(e):a.isArray(g[d])?-1<a.inArray(e,g[d]):!0},API_ALERT:function(b,c){var d=c[0],e=c[1],g=c[2],h=c[3],l=c[4],m=this.cast("GET_MESSAGE",[e]),n=this.cast("GET_MESSAGE",[g]);n!=g&&(n=0>n.indexOf("%s")?
m+n:n.replace("%s",m));if(h||l)n+="("+(h||"")+"~"+(l||"")+")";this.cast("SHOW_ALERT",[n]);a(d.elements[e]).focus()},API_SHOW_ALERT:function(a,b){alert(b[0])},API_ADD_MESSAGE:function(a,b){c[b[0]]=b[1]},API_GET_MESSAGE:function(a,b){var d=b[0];return c[d]||d},API_ADD_CALLBACK:function(a,b){h[b[0]]=b[1]},API_REMOVE_CALLBACK:function(a,b){delete h[b[0]]}}));xe.registerApp(l);var m=xe.createPlugin("editor_stub",{API_BEFORE_VALIDATE:function(a,b){var c=b[0].getAttribute("editor_sequence");c&&"object"==
typeof c&&(c=c.value);if(c)try{editorRelKeys[c].content.value=editorRelKeys[c].func(c)||""}catch(d){}}});l.registerPlugin(new m)})(jQuery);function filterAlertMessage(a){var b=a.message,d=a.act;a=a.redirect_url;var c=location.href;"undefined"!=typeof b&&b&&"success"!=b&&alert(b);"undefined"!=typeof d&&d?c=current_url.setQuery("act",d):"undefined"!=typeof a&&a&&(c=a);c==location.href&&(c=c.replace(/#(.*)$/,""));location.href=c}function procFilter(a,b){b(a);return!1}
function legacy_filter(a,b,d,c,g,e,h,n){var l=xe.getApp("Validator")[0],m=jQuery,k=[];if(!l)return!1;b.elements._filter||m(b).prepend('<input type="hidden" name="_filter" />');b.elements._filter.value=a;k[0]=a;k[1]=function(a){var k={};a=m(a).serializeArray();m.each(a,function(a,b){var c=m.trim(b.value),d=b.name;if(!c||!d)return!0;n[d]&&(d=n[d]);/\[\]$/.test(d)&&(d=d.replace(/\[\]$/,""));k[d]=k[d]?k[d]+("|@|"+c):b.value});if(h&&!confirm(h))return!1;exec_xml(d,c,k,g,e,k,b)};l.cast("ADD_CALLBACK",k);
l.cast("VALIDATE",[b,a]);return!1};
