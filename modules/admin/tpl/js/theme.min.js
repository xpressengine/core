jQuery(function(a){a("#theme,#skin").find("button.showAll").text("Show All").click(function(){var b=a(this),c=a("#skin").find(">.thumbPreview");b.toggleClass("hideAll").hasClass("hideAll")?(b.text("Hide All"),c.children("li").addClass("active").removeClass("highlight").eq(0).addClass("highlight").end().find(">ul.a:not(.selected)").show()):(b.text("Show All"),c.children("li").removeClass("active highlight").find(">ul.a:not(.selected)").hide())}).end().find(">.thumbPreview").removeClass("jx").find("ul.a").hide().before('<ul class="a selected"></ul>').prev("ul.a").each(function(){var b=a(this);b.delegate("span.thumb","click",function(){return a(this).closest(".a").nextAll("a.prevToggle:first").trigger("toggle.tp"),!1}).append(b.next(".a").find(">li.noDirection:first"))}).end().after('<a href="#toggle-tp" class="prevToggle">Show</a>').next("a.prevToggle").bind("toggle.tp",function(){var b,c=a(this).prev(".a"),d=100;b=c.closest(".thumbPreview").children("li").removeClass("highlight").end(),c.parent().toggleClass("active").hasClass("active")?c.slideDown(d).closest("li").addClass("highlight"):c.slideUp(d)}).click(function(){return a(this).trigger("toggle.tp"),!1}).end().find("span.thumb").attr("role","radio").click(function(){a(this).next("input:radio").prop("checked",!0).change()}).end().find("> .i > label").attr("title",function(){return a(this).text()}).end().find("input:radio").bind("redraw",function(){var b=a(this),c=b.closest(".a").prev(".a"),d=b.val();d!=c.find(">li:eq(1)").data("value")&&(c.find(">li:not(.noDirection)").remove(),d?(b.closest("li").clone().find("input:radio").remove().end().find("label").wrapInner("<strong>").find(">strong").text(function(){return a(this).attr("title")}).unwrap().end().end().appendTo(c),c.find(">li.noDirection").hide()):c.children("li.noDirection").show())}).change(function(){var b=a(this);b.trigger("redraw"),"themeItem"!=b.attr("name")&&a("#theme").trigger("select-theme")}).filter(":checked").change().end().filter('[name="themeItem"]').change(function(){var b,c,d,e,f=a(this);if(b=a("#theme").data("themes")||{},c=b[f.val()]){d=a("#skin").find(".i > input:radio").filter('[value=""]').prop("checked",!0).end();for(var g in c)c.hasOwnProperty(g)&&(e="layout"==g?g:g+"-skin",c[g]&&d.filter('[name="'+e+'"][value="'+c[g]+'"]').prop("checked",!0));d.filter(":checked").trigger("redraw")}}).end(),a("#theme").bind("select-theme",function(){function b(a){var b="";for(var c in a)a.hasOwnProperty(c)&&("layout"==c||e.elements[c+"-skin"])&&(b+=c+"	"+a[c]+"\n");return b}var c,d,e,f,g,h,i=a(this),j={};c=i.data("themes")||{},d=a("#skin").find(".i > input:radio"),f=d.filter(':checked[value!=""]').get(),e=d.get(0).form;for(var k=0,l=f.length;l>k;k++)h=f[k].name.match(/^layout|(\w+)-skin$/),j[h[1]||h[0]]=f[k].value;g=b(j);for(var m in c)if(c.hasOwnProperty(m)&&g==b(c[m]))return i.find('input:radio[name="themeItem"][value="'+m+'"]').prop("checked",!0).change(),void 0;i.find('input:radio[name="themeItem"][value="user_define"]').prop("checked",!0).change()})});